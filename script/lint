#!/bin/bash -e
#
# script/lint
# mas
#
# Linting checks for development and CI.
#

echo "==> 🚨 Linting mas"

for LINTER in swift-format swiftformat swiftlint; do
  if [[ ! -x "$(command -v ${LINTER})" ]]; then
    echo "warning: ${LINTER} is not installed: script/bootstrap"
    exit 1
  fi
done

echo "--> 🌳 Git"
git diff --check

echo
echo "--> 🕊️ Swift"
swiftformat .
for SOURCE in mas MasKit MasKitTests; do
  swift-format format --in-place --configuration .swift-format --recursive ${SOURCE}
done
swiftlint lint --fix --strict

echo
echo "--> 📜 Bash"
shfmt -i 2 -l -w contrib/ script/
